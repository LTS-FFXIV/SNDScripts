-- Before executing, select the duty you want to queue into and unsync if necessary

-- Number of times it will queue you into the activity
local conditionMetCount = 90

while conditionMetCount < 500 do
    -- Check for GetCharacterCondition(1) to be true and GetCharacterCondition(34) to be false
    if GetCharacterCondition(1) and not GetCharacterCondition(34) then
        -- Increment the count when the condition is met
        conditionMetCount = conditionMetCount + 1

        -- Echo the number of duties entered, does not work at the moment
        --yield("/echo Duties entered: " .. conditionMetCount)

        -- Checks if Duty Finder is open, opens if needed
        if not IsAddonVisible("JournalDetail") then
            -- Opens Duty Finder
            yield("/dutyfinder")
        end

        -- Wait for 1 second and then press Join
        yield("/pcall ContentsFinder true 12 0 <wait.1>")

        -- Check if Duty Commence screen is up
        if IsAddonVisible("ContentsFinderConfirm") then
            -- If visible, click on the commence duty
            yield("/click duty_commence")
            -- Wait for 5 seconds due to instance travel time
            yield("/wait 5")
        end
    else
        -- Checks condition every 5 seconds
        yield("/wait 5")
    end
end
